// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String    @id @default(cuid())
  name      String    @default("")
  email     String    @unique @default("")
  password  String
  createdAt DateTime? @default(now())
}

model Producto {
  id                String     @id @default(cuid())
  nombre            String     @default("")
  descripcion       String     @default("")
  precio            Int
  es_visible        Boolean    @default(true)
  imagen_id         String?
  imagen_filesize   Int?
  imagen_width      Int?
  imagen_height     Int?
  imagen_extension  String?
  imagenPlaceholder String     @default("")
  categoria         Categoria? @relation("Producto_categoria", fields: [categoriaId], references: [id])
  categoriaId       String?    @map("categoria")

  @@index([categoriaId])
}

model Categoria {
  id                 String     @id @default(cuid())
  nombre             String     @default("")
  productos          Producto[] @relation("Producto_categoria")
  se_vende_por_caja  Boolean    @default(false)
  from_Box_categoria Box[]      @relation("Box_categoria")
}

model Portada {
  id               String  @id @default(cuid())
  nombre           String  @default("")
  es_visible       Boolean @default(true)
  es_version_movil Boolean @default(false)
  imagen_id        String?
  imagen_filesize  Int?
  imagen_width     Int?
  imagen_height    Int?
  imagen_extension String?
}

model Box {
  id               String     @id @default(cuid())
  nombre           String     @default("")
  size             Int
  es_visible       Boolean    @default(true)
  imagen_id        String?
  imagen_filesize  Int?
  imagen_width     Int?
  imagen_height    Int?
  imagen_extension String?
  categoria        Categoria? @relation("Box_categoria", fields: [categoriaId], references: [id])
  categoriaId      String?    @map("categoria")
  descripcion      String     @default("")
  orders           Order[]    @relation("Order_box")

  @@index([categoriaId])
}

model Order {
  id               String  @id @default(cuid())
  nombre           String  @default("")
  email            String  @default("")
  telefono         String  @default("")
  referencia       String  @default("")
  direccion        String  @default("")
  google_maps_link String  @default("")
  dia_entrega      String  @default("")
  hora_entrega     String  @default("")
  tipo_entrega     String  @default("")
  productos        String  @default("")
  total_orden      Int
  status           String? @default("created")
  box              Box?    @relation("Order_box", fields: [boxId], references: [id])
  boxId            String? @map("box")

  @@index([boxId])
}

model Stock {
  id             String   @id @default(cuid())
  actualizado_en DateTime @default(now())
  valido_desde   DateTime @unique
  valido_hasta   DateTime @unique
  es_valido      Boolean  @default(true)
  productos      Json?
}
